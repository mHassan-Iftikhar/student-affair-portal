# Base64 File Storage Architecture

## System Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      USER INTERFACE                          â”‚
â”‚  (Academic Resources, Items, Stories, Users Pages)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â”‚ File Upload
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   VALIDATION LAYER                           â”‚
â”‚  â€¢ File Type Check   â€¢ Size Check   â€¢ MIME Type Validation  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â”‚ Valid File
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 PROCESSING LAYER                             â”‚
â”‚  â€¢ Image Compression (optional)                              â”‚
â”‚  â€¢ Thumbnail Generation (optional)                           â”‚
â”‚  â€¢ Preview Generation                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â”‚ Processed File
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   BASE64 ENCODING                            â”‚
â”‚  fileToBase64(file) â†’ Base64Data                            â”‚
â”‚  {                                                           â”‚
â”‚    data: "JVBERi0xLjQKJe...",                               â”‚
â”‚    mimeType: "application/pdf",                             â”‚
â”‚    fileName: "document.pdf",                                â”‚
â”‚    size: 2048576,                                           â”‚
â”‚    timestamp: 1738281600000                                 â”‚
â”‚  }                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â”‚ Base64Data
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 FIRESTORE STORAGE                            â”‚
â”‚                                                              â”‚
â”‚  Collection: academic_resources                              â”‚
â”‚  â”œâ”€ Document 1                                              â”‚
â”‚  â”‚  â”œâ”€ title: "Study Guide"                                â”‚
â”‚  â”‚  â”œâ”€ category: "Computer Science"                        â”‚
â”‚  â”‚  â””â”€ files:                                               â”‚
â”‚  â”‚     â””â”€ resource: {Base64Data}                           â”‚
â”‚  â”‚                                                          â”‚
â”‚  Collection: lostNfound                                     â”‚
â”‚  â”œâ”€ Document 1                                              â”‚
â”‚  â”‚  â”œâ”€ title: "Lost Laptop"                                â”‚
â”‚  â”‚  â””â”€ files:                                               â”‚
â”‚  â”‚     â””â”€ image: {Base64Data}                              â”‚
â”‚  â”‚                                                          â”‚
â”‚  Collection: events                                         â”‚
â”‚  â”œâ”€ Document 1                                              â”‚
â”‚  â”‚  â”œâ”€ title: "Tech Conference"                            â”‚
â”‚  â”‚  â””â”€ files:                                               â”‚
â”‚  â”‚     â”œâ”€ image: {Base64Data}                              â”‚
â”‚  â”‚     â””â”€ video: {Base64Data}                              â”‚
â”‚  â”‚                                                          â”‚
â”‚  Collection: users                                          â”‚
â”‚  â””â”€ Document 1                                              â”‚
â”‚     â”œâ”€ displayName: "John Doe"                             â”‚
â”‚     â””â”€ files:                                               â”‚
â”‚        â””â”€ profilePicture: {Base64Data}                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow

### Upload Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User    â”‚â”€â”€â”€â–¶â”‚  Validate â”‚â”€â”€â”€â–¶â”‚  Encode  â”‚â”€â”€â”€â–¶â”‚ Firestore â”‚
â”‚  Selects â”‚    â”‚   File    â”‚    â”‚  Base64  â”‚    â”‚   Store   â”‚
â”‚  File    â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚                                   â”‚
                     â”‚                                   â”‚
                     â–¼                                   â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  Preview  â”‚                      â”‚  Success â”‚
              â”‚  Display  â”‚                      â”‚ Feedback â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Download Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User    â”‚â”€â”€â”€â–¶â”‚ Firestore â”‚â”€â”€â”€â–¶â”‚  Decode  â”‚â”€â”€â”€â–¶â”‚  Browser  â”‚
â”‚  Clicks  â”‚    â”‚   Fetch   â”‚    â”‚  Base64  â”‚    â”‚ Download  â”‚
â”‚ Download â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                             â”‚
                                                         â–¼
                                                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                  â”‚   File   â”‚
                                                  â”‚  Saved   â”‚
                                                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Component Architecture

```
src/
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ base64Utils.ts
â”‚   â”‚   â”œâ”€ fileToBase64()
â”‚   â”‚   â”œâ”€ base64ToBlob()
â”‚   â”‚   â”œâ”€ base64ToFile()
â”‚   â”‚   â”œâ”€ base64ToDataURL()
â”‚   â”‚   â”œâ”€ downloadBase64File()
â”‚   â”‚   â”œâ”€ validateFileType()
â”‚   â”‚   â”œâ”€ validateFileSize()
â”‚   â”‚   â”œâ”€ compressImage()
â”‚   â”‚   â”œâ”€ createThumbnail()
â”‚   â”‚   â””â”€ formatFileSize()
â”‚   â”‚
â”‚   â”œâ”€â”€ firebaseStorage.ts
â”‚   â”‚   â”œâ”€ uploadFile()
â”‚   â”‚   â”œâ”€ encodeFileToBase64()
â”‚   â”‚   â”œâ”€ uploadFileAsBase64()
â”‚   â”‚   â””â”€ prepareFileForFirestore()
â”‚   â”‚
â”‚   â””â”€â”€ firestore.ts
â”‚       â”œâ”€ addDocumentWithBase64()
â”‚       â”œâ”€ updateDocumentWithBase64()
â”‚       â”œâ”€ getDocumentWithBase64()
â”‚       â”œâ”€ addAcademicResource()
â”‚       â”œâ”€ addLostAndFoundItem()
â”‚       â”œâ”€ addEvent()
â”‚       â”œâ”€ addGroup()
â”‚       â””â”€ updateUserProfilePicture()
â”‚
â””â”€â”€ pages/
    â”œâ”€â”€ AcademicResources.tsx
    â”‚   â””â”€ Handles: PDF, DOCX, Images, Videos
    â”‚
    â”œâ”€â”€ Items.tsx
    â”‚   â””â”€ Handles: Images
    â”‚
    â”œâ”€â”€ Stories.tsx
    â”‚   â””â”€ Handles: Images, Videos
    â”‚
    â””â”€â”€ Users.tsx
        â””â”€ Handles: Profile Pictures
```

## File Type Support Matrix

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Collection    â”‚   Images    â”‚  Videos  â”‚   PDFs   â”‚   DOCX   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ academic_       â”‚     âœ…      â”‚    âœ…    â”‚    âœ…    â”‚    âœ…    â”‚
â”‚ resources       â”‚             â”‚          â”‚          â”‚          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ lostNfound      â”‚     âœ…      â”‚    âŒ    â”‚    âŒ    â”‚    âŒ    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ events          â”‚     âœ…      â”‚    âœ…    â”‚    âŒ    â”‚    âŒ    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ groups          â”‚     âœ…      â”‚    âŒ    â”‚    âŒ    â”‚    âŒ    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ users           â”‚     âœ…      â”‚    âŒ    â”‚    âŒ    â”‚    âŒ    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Size Limits

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      FILE SIZE LIMITS                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Academic        â”‚ 25 MB  (PDF, DOCX, Images, Videos)        â”‚
â”‚ Resources       â”‚                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Lost & Found    â”‚ 10 MB  (Images only)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Events          â”‚ 10 MB  (Images)                           â”‚
â”‚                 â”‚ 50 MB  (Videos)                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Groups          â”‚ 10 MB  (Images)                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Users           â”‚  5 MB  (Profile Pictures)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Storage Comparison

### Traditional Approach (Firebase Storage)

```
User Upload â†’ Firebase Storage â†’ Get URL â†’ Store URL in Firestore

Pros:
âœ… Unlimited file size
âœ… CDN distribution
âœ… Lower storage cost

Cons:
âŒ Two separate systems
âŒ URL-based access
âŒ Complex security rules
âŒ No offline support
```

### Base64 Approach (Firestore)

```
User Upload â†’ Base64 Encode â†’ Store in Firestore

Pros:
âœ… Unified storage
âœ… Real-time sync
âœ… Better offline support
âœ… Single security model
âœ… Query with metadata

Cons:
âŒ Document size limits
âŒ Higher storage cost
âŒ 33% overhead
âŒ Best for small files
```

## Performance Optimization

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   OPTIMIZATION STRATEGIES                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  1. Image Compression                                       â”‚
â”‚     Before: 5 MB image                                      â”‚
â”‚     After:  1.5 MB image (70% quality)                      â”‚
â”‚     Savings: 70%                                            â”‚
â”‚                                                              â”‚
â”‚  2. Thumbnail Generation                                    â”‚
â”‚     Full Size: 2 MB (1920x1080)                            â”‚
â”‚     Thumbnail: 50 KB (200x200)                             â”‚
â”‚     Load Time: 40x faster                                   â”‚
â”‚                                                              â”‚
â”‚  3. Lazy Loading                                            â”‚
â”‚     Load thumbnails in list view                            â”‚
â”‚     Load full files on demand                               â”‚
â”‚                                                              â”‚
â”‚  4. Caching                                                 â”‚
â”‚     Cache decoded files in memory                           â”‚
â”‚     Reuse without re-decoding                               â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Error Handling Flow

```
Upload Attempt
     â”‚
     â”œâ”€ File Type Invalid? â”€â”€â–¶ Show Error Toast
     â”‚                         "Invalid file type"
     â”‚
     â”œâ”€ File Too Large? â”€â”€â”€â”€â–¶ Show Error Toast
     â”‚                         "File exceeds 10MB"
     â”‚
     â”œâ”€ Encoding Failed? â”€â”€â”€â–¶ Show Error Toast
     â”‚                         "Failed to process file"
     â”‚
     â”œâ”€ Upload Failed? â”€â”€â”€â”€â”€â–¶ Show Error Toast
     â”‚                         "Failed to upload"
     â”‚
     â””â”€ Success â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ Show Success Toast
                              "File uploaded successfully"
```

## Security Layers

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     SECURITY LAYERS                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  Layer 1: Client-Side Validation                            â”‚
â”‚  â”œâ”€ File type whitelist                                     â”‚
â”‚  â”œâ”€ File size limits                                        â”‚
â”‚  â””â”€ MIME type checking                                      â”‚
â”‚                                                              â”‚
â”‚  Layer 2: Firebase Authentication                           â”‚
â”‚  â”œâ”€ User must be authenticated                              â”‚
â”‚  â””â”€ JWT token verification                                  â”‚
â”‚                                                              â”‚
â”‚  Layer 3: Firestore Security Rules                          â”‚
â”‚  â”œâ”€ Read/write permissions                                  â”‚
â”‚  â”œâ”€ Field validation                                        â”‚
â”‚  â””â”€ Size restrictions                                       â”‚
â”‚                                                              â”‚
â”‚  Layer 4: Server-Side Validation (if using API)            â”‚
â”‚  â”œâ”€ Request validation                                      â”‚
â”‚  â”œâ”€ Rate limiting                                           â”‚
â”‚  â””â”€ Content scanning                                        â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

This architecture provides a robust, scalable, and maintainable file storage solution! ğŸ—ï¸
